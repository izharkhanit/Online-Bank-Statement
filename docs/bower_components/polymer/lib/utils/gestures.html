<html><head><link rel="import" href="boot.html"><link rel="import" href="async.html"><link rel="import" href="debounce.html"><script>(function(){'use strict';function a(a){return-1<r.indexOf(a)}function b(b){return a(b)||'touchend'===b?void 0:l&&u&&Polymer.passiveTouchGestures?{passive:!0}:void 0}function c(a){return y[a.localName]||!1}function d(a){let b=[...(a.labels||[])];if(!b.length){b=[];let c=a.getRootNode();if(a.id){let d=c.querySelectorAll(`label[for = ${a.id}]`);for(let a=0;a<d.length;a++)b.push(d[a])}}return b}function f(a){let b=v?['click']:r;for(let c,d=0;d<b.length;d++)c=b[d],a?(x.length=0,document.addEventListener(c,z,!0)):document.removeEventListener(c,z,!0)}function g(b){let c=b.type;if(!a(c))return!1;if('mousemove'===c){let a=void 0===b.buttons?1:b.buttons;return b instanceof window.MouseEvent&&!t&&(a=s[b.which]||0),!!(1&a)}else{let a=void 0===b.button?0:b.button;return 0===a}}function h(a){if('click'===a.type){if(0===a.detail)return!0;let b=B._findOriginalTarget(a);if(!b.nodeType||b.nodeType!==Node.ELEMENT_NODE)return!0;let c=b.getBoundingClientRect(),d=a.pageX,e=a.pageY;return!(d>=c.left&&d<=c.right&&e>=c.top&&e<=c.bottom)}return!1}function e(a){let b='auto',c=a.composedPath&&a.composedPath();if(c)for(let a,d=0;d<c.length;d++)if(a=c[d],a[o]){b=a[o];break}return b}function i(a,b,c){a.movefn=b,a.upfn=c,document.addEventListener('mousemove',b),document.addEventListener('mouseup',c)}function j(a){document.removeEventListener('mousemove',a.movefn),document.removeEventListener('mouseup',a.upfn),a.movefn=null,a.upfn=null}var k=Math.abs;let l='string'===typeof document.head.style.touchAction,m='__polymerGestures',n='__polymerGesturesHandled',o='__polymerGesturesTouchAction',p=25,q=5,r=['mousedown','mousemove','mouseup','click'],s=[0,1,4,2],t=function(){try{return 1===new MouseEvent('test',{buttons:1}).buttons}catch(a){return!1}}(),u=!1;(function(){try{let a=Object.defineProperty({},'passive',{get(){u=!0}});window.addEventListener('test',null,a),window.removeEventListener('test',null,a)}catch(a){}})();let v=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),w=function(){};w.prototype.reset,w.prototype.mousedown,w.prototype.mousemove,w.prototype.mouseup,w.prototype.touchstart,w.prototype.touchmove,w.prototype.touchend,w.prototype.click;const x=[],y={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0};let z=function(a){let b=a.sourceCapabilities;if((!b||b.firesTouchEvents)&&(a[n]={skip:!0},'click'===a.type)){let b=!1,e=a.composedPath&&a.composedPath();if(e)for(let a=0;a<e.length;a++){if(e[a].nodeType===Node.ELEMENT_NODE)if('label'===e[a].localName)x.push(e[a]);else if(c(e[a])){let c=d(e[a]);for(let a=0;a<c.length;a++)b=b||-1<x.indexOf(c[a])}if(e[a]===A.mouse.target)return}if(b)return;a.preventDefault(),a.stopPropagation()}},A={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener('touchend',function(a){A.mouse.mouseIgnoreJob||f(!0);A.mouse.target=a.composedPath()[0],A.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(A.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(2500),function(){f(),A.mouse.target=null,A.mouse.mouseIgnoreJob=null})},!!u&&{passive:!0});const B={gestures:{},recognizers:[],deepTargetFind:function(a,b){let c=document.elementFromPoint(a,b),d=c;for(;d&&d.shadowRoot&&!window.ShadyDOM;){let e=d;if(d=d.shadowRoot.elementFromPoint(a,b),e===d)break;d&&(c=d)}return c},_findOriginalTarget:function(a){if(a.composedPath){const b=a.composedPath();return 0<b.length?b[0]:a.target}return a.target},_handleNative:function(a){let b,c=a.type,d=a.currentTarget,e=d[m];if(e){let d=e[c];if(d){if(!a[n]&&(a[n]={},'touch'===c.slice(0,5))){a=a;let b=a.changedTouches[0];if('touchstart'===c&&1===a.touches.length&&(A.touch.id=b.identifier),A.touch.id!==b.identifier)return;l||'touchstart'!==c&&'touchmove'!==c||B._handleTouchAction(a)}if(b=a[n],!b.skip){for(let c,e=0;e<B.recognizers.length;e++)c=B.recognizers[e],d[c.name]&&!b[c.name]&&c.flow&&-1<c.flow.start.indexOf(a.type)&&c.reset&&c.reset();for(let e,f=0;f<B.recognizers.length;f++)e=B.recognizers[f],d[e.name]&&!b[e.name]&&(b[e.name]=!0,e[c](a))}}}},_handleTouchAction:function(a){let b=a.changedTouches[0],c=a.type;if('touchstart'===c)A.touch.x=b.clientX,A.touch.y=b.clientY,A.touch.scrollDecided=!1;else if('touchmove'===c){if(A.touch.scrollDecided)return;A.touch.scrollDecided=!0;let c=e(a),d=!1,f=k(A.touch.x-b.clientX),g=k(A.touch.y-b.clientY);a.cancelable&&('none'===c?d=!0:'pan-x'===c?d=g>f:'pan-y'===c&&(d=f>g)),d?a.preventDefault():B.prevent('track')}},addListener:function(a,b,c){return!!this.gestures[b]&&(this._add(a,b,c),!0)},removeListener:function(a,b,c){return!!this.gestures[b]&&(this._remove(a,b,c),!0)},_add:function(c,d,e){let f=this.gestures[d],g=f.deps,h=f.name,j=c[m];j||(c[m]=j={});for(let f,k,l=0;l<g.length;l++)(f=g[l],!(v&&a(f)&&'click'!==f))&&(k=j[f],k||(j[f]=k={_count:0}),0===k._count&&c.addEventListener(f,this._handleNative,b(f)),k[h]=(k[h]||0)+1,k._count=(k._count||0)+1);c.addEventListener(d,e),f.touchAction&&this.setTouchAction(c,f.touchAction)},_remove:function(a,c,d){let e=this.gestures[c],f=e.deps,g=e.name,h=a[m];if(h)for(let c,d,e=0;e<f.length;e++)c=f[e],d=h[c],d&&d[g]&&(d[g]=(d[g]||1)-1,d._count=(d._count||1)-1,0===d._count&&a.removeEventListener(c,this._handleNative,b(c)));a.removeEventListener(c,d)},register:function(a){this.recognizers.push(a);for(let b=0;b<a.emits.length;b++)this.gestures[a.emits[b]]=a},_findRecognizerByEvent:function(a){for(let b,c=0;c<this.recognizers.length;c++){b=this.recognizers[c];for(let c,d=0;d<b.emits.length;d++)if(c=b.emits[d],c===a)return b}return null},setTouchAction:function(a,b){l&&Polymer.Async.microTask.run(()=>{a.style.touchAction=b}),a[o]=b},_fire:function(a,b,c){let d=new Event(b,{bubbles:!0,cancelable:!0,composed:!0});if(d.detail=c,a.dispatchEvent(d),d.defaultPrevented){let a=c.preventer||c.sourceEvent;a&&a.preventDefault&&a.preventDefault()}},prevent:function(a){let b=this._findRecognizerByEvent(a);b.info&&(b.info.prevent=!0)},resetMouseCanceller:function(){A.mouse.mouseIgnoreJob&&A.mouse.mouseIgnoreJob.flush()}};B.register({name:'downup',deps:['mousedown','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['down','up'],info:{movefn:null,upfn:null},reset:function(){j(this.info)},mousedown:function(a){if(!g(a))return;let b=B._findOriginalTarget(a),c=this;i(this.info,function(a){g(a)||(c._fire('up',b,a),j(c.info))},function(a){g(a)&&c._fire('up',b,a),j(c.info)}),this._fire('down',b,a)},touchstart:function(a){this._fire('down',B._findOriginalTarget(a),a.changedTouches[0],a)},touchend:function(a){this._fire('up',B._findOriginalTarget(a),a.changedTouches[0],a)},_fire:function(a,b,c,d){B._fire(b,a,{x:c.clientX,y:c.clientY,sourceEvent:c,preventer:d,prevent:function(a){return B.prevent(a)}})}}),B.register({name:'track',touchAction:'none',deps:['mousedown','touchstart','touchmove','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['track'],info:{x:0,y:0,state:'start',started:!1,moves:[],addMove:function(a){this.moves.length>2&&this.moves.shift(),this.moves.push(a)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state='start',this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,j(this.info)},hasMovedEnough:function(a,b){if(this.info.prevent)return!1;if(this.info.started)return!0;let c=k(this.info.x-a),d=k(this.info.y-b);return c>=q||d>=q},mousedown:function(a){if(!g(a))return;let b=B._findOriginalTarget(a),c=this,d=function(a){let d=a.clientX,e=a.clientY;c.hasMovedEnough(d,e)&&(c.info.state=c.info.started?'mouseup'===a.type?'end':'track':'start','start'===c.info.state&&B.prevent('tap'),c.info.addMove({x:d,y:e}),!g(a)&&(c.info.state='end',j(c.info)),c._fire(b,a),c.info.started=!0)};i(this.info,d,function(a){c.info.started&&d(a),j(c.info)}),this.info.x=a.clientX,this.info.y=a.clientY},touchstart:function(a){let b=a.changedTouches[0];this.info.x=b.clientX,this.info.y=b.clientY},touchmove:function(a){let b=B._findOriginalTarget(a),c=a.changedTouches[0],d=c.clientX,e=c.clientY;this.hasMovedEnough(d,e)&&('start'===this.info.state&&B.prevent('tap'),this.info.addMove({x:d,y:e}),this._fire(b,c),this.info.state='track',this.info.started=!0)},touchend:function(a){let b=B._findOriginalTarget(a),c=a.changedTouches[0];this.info.started&&(this.info.state='end',this.info.addMove({x:c.clientX,y:c.clientY}),this._fire(b,c,a))},_fire:function(a,b){let c,d=this.info.moves[this.info.moves.length-2],e=this.info.moves[this.info.moves.length-1],f=e.x-this.info.x,g=e.y-this.info.y,h=0;d&&(c=e.x-d.x,h=e.y-d.y),B._fire(a,'track',{state:this.info.state,x:b.clientX,y:b.clientY,dx:f,dy:g,ddx:c,ddy:h,sourceEvent:b,hover:function(){return B.deepTargetFind(b.clientX,b.clientY)}})}}),B.register({name:'tap',deps:['mousedown','click','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['click','touchend']},emits:['tap'],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(a){this.info.x=a.clientX,this.info.y=a.clientY},mousedown:function(a){g(a)&&this.save(a)},click:function(a){g(a)&&this.forward(a)},touchstart:function(a){this.save(a.changedTouches[0],a)},touchend:function(a){this.forward(a.changedTouches[0],a)},forward:function(a,b){let c=k(a.clientX-this.info.x),d=k(a.clientY-this.info.y),f=B._findOriginalTarget(b||a);!f||f.disabled||(isNaN(c)||isNaN(d)||c<=p&&d<=p||h(a))&&!this.info.prevent&&B._fire(f,'tap',{x:a.clientX,y:a.clientY,sourceEvent:a,preventer:b})}}),B.findOriginalTarget=B._findOriginalTarget,B.add=B.addListener,B.remove=B.removeListener,Polymer.Gestures=B})();</script></head><body></body></html>