(function(b){"use strict";function e(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c.push(a[d].substr(0,b));return c}function f(a){return function(b,c,d){var e=d[a].indexOf(c.charAt(0).toUpperCase()+c.substr(1).toLowerCase());~e&&(b.month=e)}}function j(a,b){for(a+="",b=b||2;a.length<b;)a="0"+a;return a}var d=Math.round,k={},m=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,n=/\d\d?/,p=/\d{3}/,q=/\d{4}/,o=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,t=/\[([^]*?)\]/gm,a=function(){},i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],s=e(r,3),u=e(i,3);k.i18n={dayNamesShort:u,dayNames:i,monthNamesShort:s,monthNames:r,amPm:["am","pm"],DoFn:function(a){return a+["th","st","nd","rd"][3<a%10?0:(10!==a-a%10)*a%10]}};var v={D:function(a){return a.getDate()},DD:function(a){return j(a.getDate())},Do:function(a,b){return b.DoFn(a.getDate())},d:function(a){return a.getDay()},dd:function(a){return j(a.getDay())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return j(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},YY:function(a){return(a.getFullYear()+"").substr(2)},YYYY:function(a){return j(a.getFullYear(),4)},h:function(a){return a.getHours()%12||12},hh:function(a){return j(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return j(a.getHours())},m:function(a){return a.getMinutes()},mm:function(a){return j(a.getMinutes())},s:function(a){return a.getSeconds()},ss:function(a){return j(a.getSeconds())},S:function(a){return d(a.getMilliseconds()/100)},SS:function(a){return j(d(a.getMilliseconds()/10),2)},SSS:function(a){return j(a.getMilliseconds(),3)},a:function(a,b){return 12>a.getHours()?b.amPm[0]:b.amPm[1]},A:function(a,b){return 12>a.getHours()?b.amPm[0].toUpperCase():b.amPm[1].toUpperCase()},ZZ:function(a){var b=Math.abs,c=a.getTimezoneOffset();return(0<c?"-":"+")+j(100*Math.floor(b(c)/60)+b(c)%60,4)}},g={D:[n,function(a,b){a.day=b}],Do:[new RegExp(n.source+o.source),function(a,b){a.day=parseInt(b,10)}],M:[n,function(a,b){a.month=b-1}],YY:[n,function(a,b){var c=new Date,d=+(""+c.getFullYear()).substr(0,2);a.year=""+(68<b?d-1:d)+b}],h:[n,function(a,b){a.hour=b}],m:[n,function(a,b){a.minute=b}],s:[n,function(a,b){a.second=b}],YYYY:[q,function(a,b){a.year=b}],S:[/\d/,function(a,b){a.millisecond=100*b}],SS:[/\d{2}/,function(a,b){a.millisecond=10*b}],SSS:[p,function(a,b){a.millisecond=b}],d:[n,a],ddd:[o,a],MMM:[o,f("monthNamesShort")],MMMM:[o,f("monthNames")],a:[o,function(a,b,c){var d=b.toLowerCase();d===c.amPm[0]?a.isPm=!1:d===c.amPm[1]&&(a.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(a,b){"Z"===b&&(b="+00:00");var c,d=(b+"").match(/([\+\-]|\d\d)/gi);d&&(c=+(60*d[1])+parseInt(d[2],10),a.timezoneOffset="+"===d[0]?c:-c)}]};g.dd=g.d,g.dddd=g.ddd,g.DD=g.D,g.mm=g.m,g.hh=g.H=g.HH=g.h,g.MM=g.M,g.ss=g.s,g.A=g.a,k.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},k.format=function(b,c,d){var f=d||k.i18n;if("number"===typeof b&&(b=new Date(b)),"[object Date]"!==Object.prototype.toString.call(b)||isNaN(b.getTime()))throw new Error("Invalid Date in fecha.format");c=k.masks[c]||c||k.masks["default"];var g=[];return c=c.replace(t,function(a,b){return g.push(b),"??"}),c=c.replace(m,function(a){return a in v?v[a](b,f):a.slice(1,a.length-1)}),c.replace(/\?\?/g,function(){return g.shift()})},k.parse=function(b,c,d){var e=d||k.i18n;if("string"!==typeof c)throw new Error("Invalid format in fecha.parse");if(c=k.masks[c]||c,1e3<b.length)return!1;var h=!0,j={};if(c.replace(m,function(a){if(g[a]){var c=g[a],d=b.search(c[0]);~d?b.replace(c[0],function(a){return c[1](j,a,e),b=b.substr(d+a.length),a}):h=!1}return g[a]?"":a.slice(1,a.length-1)}),!h)return!1;var i=new Date;!0===j.isPm&&null!=j.hour&&12!==+j.hour?j.hour=+j.hour+12:!1===j.isPm&&12===+j.hour&&(j.hour=0);var l;return null==j.timezoneOffset?l=new Date(j.year||i.getFullYear(),j.month||0,j.day||1,j.hour||0,j.minute||0,j.second||0,j.millisecond||0):(j.minute=+(j.minute||0)-+j.timezoneOffset,l=new Date(Date.UTC(j.year||i.getFullYear(),j.month||0,j.day||1,j.hour||0,j.minute||0,j.second||0,j.millisecond||0))),l},"undefined"!==typeof module&&module.exports?module.exports=k:"function"===typeof define&&define.amd?define(function(){return k}):b.fecha=k})(this);